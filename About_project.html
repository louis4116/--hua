<!DOCTYPE html>
<html lang="zh-tw">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0,minimum-scale=1"
    />
    <link rel="stylesheet" href="./css/hot_project.css" />
    <title>熱銷建案</title>
  </head>
  <body>
    <div class="loading-page">
      <div class="box">
        <div class="box-img"><img src="./img/logo01.svg" alt="logo01" /></div>
        <div class="box-para">
          <div class="loading-progress">0</div>
          <span>%</span>
        </div>
      </div>
    </div>
    <nav id="nav"></nav>
    <main id="project-main">
      <section class="first-cut">
        <div class="first-cut-img-container">
          <picture>
            <source
              srcset="./img/熱銷建案/首頁背景-phone.webp"
              media="(max-width:500px)"
            />
            <img src="./img/熱銷建案/首頁背景-pc.webp" alt="首頁背景-pc" />
          </picture>
        </div>
      </section>
      <section class="second-cut">
        <div class="cut-2-title title">
          <h1 class="cut-2-base base">PROJECT</h1>
          <div class="cut-2-title-content content">
            <h3>PROJECT</h3>
            <h4>熱銷建案</h4>
          </div>
        </div>
        <div class="cut-2-main">
          <div class="cut-2-main-left">
            <img
              class="oval"
              src="./img/熱銷建案/半橢圓.webp"
              alt="半橢圓.webp"
            />
            <h1 class="cut-2-main-left-h1">HOME FROM<br />HEART</h1>
            <div class="cut-2-main-left-small-title">
              <div class="cut-2-left-line"></div>
              <h3>品世界</h3>
              <div class="cut-2-left-line"></div>
              <span>三重重陽重劃區</span>
            </div>
            <p class="main-left-p">
              品味生活，走遍世界，終於發現原來回家遇見真實的自己，才是真正的「品世界」。
            </p>
            <div class="cut-2-main-left-button">
              <div class="connect-button connect">
                <img
                  src="./img/熱銷建案/connect-icon.svg"
                  alt="connect-icon"
                /><span>建案連結</span>
              </div>
              <div class="connect-button fb">
                <img src="./img/熱銷建案/fb-icon.svg" alt="fb-icon" /><span
                  >粉絲專頁</span
                >
              </div>
              <div class="connect-button mail">
                <img src="./img/熱銷建案/mail-icon.svg" alt="mail-icon" /><span
                  >預約鑑賞</span
                >
              </div>
            </div>
            <div class="more">
              <img
                class="more-spot"
                src="./img/熱銷建案/more-spot.svg"
                alt="more-spot"
              />
              <p>更多內容</p>
              <a href="javascript:;" class="more-arrow"></a>
            </div>
          </div>
          <div class="cut-2-main-right">
            <div class="cut-2-carousel-swiper">
              <div class="swiper-wrapper">
                <div class="swiper-slide" data-name="品世界">
                  <div class="swiper-img href-item">
                    <a href="javascript:;" class="href-link"></a>
                    <img src="./img/熱銷建案/輪播-大-2.png" alt="品世界" />
                  </div>
                  <img
                    class="text-rotate"
                    src="./img/home/text-rotate.png"
                    alt="文字轉圈"
                  />
                </div>
                <div class="swiper-slide" data-name="心世界">
                  <div class="swiper-img href-item">
                    <a href="javascript:;" class="href-link"></a>
                    <img src="./img/熱銷建案/輪播-大-1.png" alt="心世界" />
                  </div>
                  <img
                    class="text-rotate"
                    src="./img/home/text-rotate.png"
                    alt="文字轉圈"
                  />
                </div>

                <div class="swiper-slide" data-name="閱世界">
                  <div class="swiper-img href-item">
                    <a href="javascript:;" class="href-link"></a>
                    <img src="./img/熱銷建案/輪播-大-3.png" alt="閱世界" />
                  </div>
                  <img
                    class="text-rotate"
                    src="./img/home/text-rotate.png"
                    alt="文字轉圈"
                  />
                </div>
                <div class="swiper-slide" data-name="品世界">
                  <div class="swiper-img href-item">
                    <a href="javascript:;" class="href-link"></a>
                    <img src="./img/熱銷建案/輪播-大-2.png" alt="品世界" />
                  </div>
                  <img
                    class="text-rotate"
                    src="./img/home/text-rotate.png"
                    alt="文字轉圈"
                  />
                </div>
                <div class="swiper-slide" data-name="心世界">
                  <div class="swiper-img href-item">
                    <a href="javascript:;" class="href-link"></a>
                    <img src="./img/熱銷建案/輪播-大-1.png" alt="心世界" />
                  </div>
                  <img
                    class="text-rotate"
                    src="./img/home/text-rotate.png"
                    alt="文字轉圈"
                  />
                </div>
                <div class="swiper-slide" data-name="閱世界">
                  <div class="swiper-img href-item">
                    <a href="javascript:;" class="href-link"></a>
                    <img src="./img/熱銷建案/輪播-大-3.png" alt="閱世界" />
                  </div>
                  <img
                    class="text-rotate"
                    src="./img/home/text-rotate.png"
                    alt="文字轉圈"
                  />
                </div>
                <div class="swiper-page">
                  <div class="swiper-page-top"></div>
                  <div class="swiper-page-bottom">
                    <div
                      class="swiper-page-bottom-left swiper-button swiper-button-prev"
                    >
                      <img src="./img/熱銷建案/左箭頭.png" alt="左箭頭" />
                      <span>PREV</span>
                    </div>
                    <div class="swiper-page-line"></div>
                    <div
                      class="swiper-page-bottom-right swiper-button swiper-button-next"
                    >
                      <span>NEXT</span>
                      <img src="./img/熱銷建案/右箭頭.png" alt="右箭頭" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="cut-2-main-phone">
            <h1 class="cut-2-phone-h1">HOME FROM HEART</h1>
            <div class="cut-2-phone-item" id="phone-item-1">
              <div class="cut-2-phone-item-img">
                <a href="About_project_content.html?id=1" class="href-link"></a>
                <div class="phone-item-img-big-container">
                  <img
                    class="phone-item-img-big"
                    src="./img/熱銷建案/熱銷-品世界.webp"
                    alt="品世界"
                  />
                </div>
                <img class="frame" src="./img/熱銷建案/外框.png" alt="框線" />
                <img
                  class="text-rotate"
                  src="./img/熱銷建案/熱銷文字轉圈.svg"
                  alt="文字轉圈"
                />
              </div>
              <div class="cut-2-phone-item-content">
                <div class="cut-2-main-left-small-title">
                  <div class="cut-2-left-line"></div>
                  <h3>品世界</h3>
                  <div class="cut-2-left-line"></div>
                  <span>三重重陽重劃區</span>
                </div>
                <p class="main-left-p">
                  品味生活，走遍世界，終於發現原來回家遇見真實的自己，才是真正的「品世界」。
                </p>
                <div class="cut-2-main-left-button">
                  <div class="connect-button connect">
                    <img
                      src="./img/熱銷建案/connect-icon.svg"
                      alt="connect-icon"
                    /><span>建案連結</span>
                  </div>
                  <div class="connect-button fb">
                    <img src="./img/熱銷建案/fb-icon.svg" alt="fb-icon" /><span
                      >粉絲專頁</span
                    >
                  </div>
                  <div class="connect-button mail">
                    <img
                      src="./img/熱銷建案/mail-icon.svg"
                      alt="mail-icon"
                    /><span>預約鑑賞</span>
                  </div>
                </div>
                <div class="more">
                  <img
                    class="more-spot"
                    src="./img/熱銷建案/more-spot.svg"
                    alt="more-spot"
                  />
                  <p>更多內容</p>
                  <a
                    href="About_project_content.html?id=1"
                    class="more-arrow"
                  ></a>
                </div>
              </div>
            </div>
            <div class="cut-2-phone-item" id="phone-item-2">
              <div class="cut-2-phone-item-img">
                <a href="About_project_content.html?id=2" class="href-link"></a>
                <div class="phone-item-img-big-container">
                  <img
                    class="phone-item-img-big"
                    src="./img/熱銷建案/熱銷-新世界.webp"
                    alt="心世界"
                  />
                </div>
                <img class="frame" src="./img/熱銷建案/外框.png" alt="框線" />
                <img
                  class="text-rotate"
                  src="./img/熱銷建案/熱銷文字轉圈.svg"
                  alt="文字轉圈"
                />
              </div>
              <div class="cut-2-phone-item-content">
                <div class="cut-2-main-left-small-title">
                  <div class="cut-2-left-line"></div>
                  <h3>心世界</h3>
                  <div class="cut-2-left-line"></div>
                  <span>重陽重劃區</span>
                </div>
                <p class="main-left-p">
                  品味生活，走遍世界，終於發現原來回家遇見真實的自己，才是真正的「品世界」。
                </p>
                <div class="cut-2-main-left-button">
                  <div class="connect-button connect">
                    <img
                      src="./img/熱銷建案/connect-icon.svg"
                      alt="connect-icon"
                    /><span>建案連結</span>
                  </div>
                  <div class="connect-button fb">
                    <img src="./img/熱銷建案/fb-icon.svg" alt="fb-icon" /><span
                      >粉絲專頁</span
                    >
                  </div>
                  <div class="connect-button mail">
                    <img
                      src="./img/熱銷建案/mail-icon.svg"
                      alt="mail-icon"
                    /><span>預約鑑賞</span>
                  </div>
                </div>
                <div class="more">
                  <img
                    class="more-spot"
                    src="./img/熱銷建案/more-spot.svg"
                    alt="more-spot"
                  />
                  <p>更多內容</p>
                  <a
                    href="About_project_content.html?id=2"
                    class="more-arrow"
                  ></a>
                </div>
              </div>
            </div>
            <div class="cut-2-phone-item" id="phone-item-3">
              <div class="cut-2-phone-item-img">
                <a href="About_project_content.html?id=3" class="href-link"></a>
                <div class="phone-item-img-big-container">
                  <img
                    class="phone-item-img-big"
                    src="./img/熱銷建案/熱銷-閱世界.webp"
                    alt="閱世界"
                  />
                </div>
                <img class="frame" src="./img/熱銷建案/外框.png" alt="框線" />
                <img
                  class="text-rotate"
                  src="./img/熱銷建案/熱銷文字轉圈.svg"
                  alt="文字轉圈"
                />
              </div>
              <div class="cut-2-phone-item-content">
                <div class="cut-2-main-left-small-title">
                  <div class="cut-2-left-line"></div>
                  <h3>閱世界</h3>
                  <div class="cut-2-left-line"></div>
                  <span>重陽重劃區</span>
                </div>
                <p class="main-left-p">
                  品味生活，走遍世界，終於發現原來回家遇見真實的自己，才是真正的「品世界」。
                </p>
                <div class="cut-2-main-left-button">
                  <div class="connect-button connect">
                    <img
                      src="./img/熱銷建案/connect-icon.svg"
                      alt="connect-icon"
                    /><span>建案連結</span>
                  </div>
                  <div class="connect-button fb">
                    <img src="./img/熱銷建案/fb-icon.svg" alt="fb-icon" /><span
                      >粉絲專頁</span
                    >
                  </div>
                  <div class="connect-button mail">
                    <img
                      src="./img/熱銷建案/mail-icon.svg"
                      alt="mail-icon"
                    /><span>預約鑑賞</span>
                  </div>
                </div>
                <div class="more">
                  <img
                    class="more-spot"
                    src="./img/熱銷建案/more-spot.svg"
                    alt="more-spot"
                  />
                  <p>更多內容</p>
                  <a
                    href="About_project_content.html?id=3"
                    class="more-arrow"
                  ></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <footer id="footer">
      <span>Copyright © 2023樺輝建設股份有限公司版權所有　</span>
      <span>地址：台北市內湖區民權東路六段123巷28號10樓　</span>
      <span>TEL： 02-27928078</span>
    </footer>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/decimal.js/9.0.0/decimal.min.js"></script>
    <script src="./js/gsap.min.js"></script>
    <script src="./js/ScrollToPlugin.min.js"></script>
    <script src="./js/ScrollTrigger.min.js"></script>
    <script src="./js/ScrollSmoother.min.js"></script>
    <script src="./js/SplitText.min.js"></script>
    <script src="./js/jquery.fancybox.min.js"></script>
    <script src="./js/nav.js"></script>
    <script src="./js/hot-carousel.js"></script>
    <script>
      function loading(tag) {
        let number = $(tag).html();
        let parse = parseInt(number);

        let test;
        let timeRun = setInterval(() => {
          test = parse++;
          $(tag).text(test);
          if (test == 99) clearInterval(timeRun);
        }, 50);
      }
      loading(".loading-progress");
      $(window).on("load", function () {
        gsap.registerPlugin(ScrollTrigger);
        gsap.to(".loading-page", {
          opacity: 0,
        });
        gsap.from(".first-cut-img-container", {
          scale: 1.2,
          duration: 2,
        });

        let mySwiper;

        if (window.innerWidth <= 500) {
          $(".cut-2-main-left").remove();
          $(".cut-2-main-right").remove();
        } else {
          $(".cut-2-main-phone").remove();
          //輪播設定
          mySwiper = new Swiper(".cut-2-carousel-swiper", {
            // autoplay: {
            //   delay: 6000,
            // },
            speed: 1000,
            navigation: {
              nextEl: ".swiper-button-next",
              prevEl: ".swiper-button-prev",
              disabledClass: ".swiper-button-disabled",
            },
            pagination: {
              el: ".swiper-page-top",
              type: "custom",
              renderCustom: function (swiper, current, total) {
                let page = "";
                let currentHalf;
                let totalhalf = total / 2;
                for (let i = 1; i <= totalhalf; i++) {
                  currentHalf = current;
                  if (current > 3) currentHalf = current - totalhalf;
                  if (i === currentHalf) {
                    page += `<span class="swiper-page-top-active custom">0${i}</span>`;
                  } else {
                    page += `<span class="swiper-page-top-inactive custom">0${i}</span>`;
                  }
                }

                return page;
              },
            },
            centeredSlides: true,
            loop: true,
            allowTouchMove: false,
            breakpoints: {
              0: {
                slidesPerView: 1.25,
                spaceBetween: 50,
              },
            },
            effect: "creative",
            creativeEffect: {
              prev: {
                translate: ["-130%", "25%", 0],
                opacity: "0",
                scale: 0.6,
              },
              next: {
                translate: ["130%", "-25%", 0],
                opacity: "0",
                scale: 0.6,
              },
              limitProgress: 1,
            },
            on: {
              init: function (swiper) {
                //初始
                const active = this.activeIndex;
                const currentSlide = this.slides[active];
                const currentAttr = currentSlide.getAttribute("data-name");
                changeContent(currentAttr, "init");
              },
              slideChangeTransitionStart: function (swiper) {
                swiper.isLocked = false;
                const active = this.activeIndex;
                const currentSlide = this.slides[active];
                const currentAttr = currentSlide.getAttribute("data-name");

                $(".swiper-button").addClass("swiper-button-disabled");

                let cut2Tl = gsap.timeline();

                cut2Tl
                  .to(".cut-2-main-left-small-title", {
                    opacity: 0,
                    x: 50,
                    duration: 0.3,
                  })
                  .to(
                    ".main-left-p",
                    {
                      opacity: 0,
                      x: 50,
                      duration: 0.3,
                    },
                    "<+0.1"
                  )
                  .to(
                    ".cut-2-main-left-button",
                    {
                      opacity: 0,
                      x: 50,
                      duration: 0.3,
                    },
                    "<+0.1"
                  )
                  .to(
                    ".more",
                    {
                      opacity: 0,
                      x: 50,
                      duration: 0.3,
                      onComplete: () => {
                        changeContent(currentAttr, "end");
                        cut2Tl.kill();
                      },
                    },
                    "<"
                  );
              },
              slideChangeTransitionEnd: function (swiper) {
                swiper.isLocked = true;
                // swiper.slideToLoop(this.realIndex, 500, true);
              },
              transitionEnd: function (swiper) {
                //滑動結束
              },
            },
          });
        }
        $(".swiper-page-top").on("click", ".custom", function () {
          console.log("test");
        });
        //改變內容物
        function changeContent(current, dur) {
          if (!current) return;
          const findName = hotProject.filter((item) => item.sTitle === current);
          const homeImgObg = findName.reduce((acc, cur) => {
            acc = cur;
            return acc;
          }, {});
          if (dur === "init") {
            //初始
            $(".cut-2-main-left-h1").text(homeImgObg?.title);
            $(".cut-2-main-left-small-title")
              .children("h3")
              .text(homeImgObg?.sTitle);
            $(".cut-2-main-left-small-title")
              .children("span")
              .text(homeImgObg?.place);
            $(".main-left-p").text(homeImgObg?.para);
            $(".more-arrow").attr("href", homeImgObg?.more);
            $(".swiper-slide-active .href-link").attr("href", homeImgObg?.more);
          } else if (dur === "end") {
            //輪播翻完一頁後
            const cut2Left = $(".cut-2-main-left");
            cut2Left
              .children(".cut-2-main-left-small-title")
              .children("h3")
              .text(homeImgObg?.sTitle);
            cut2Left
              .children(".cut-2-main-left-small-title")
              .children("span")
              .text(homeImgObg?.place);
            cut2Left.children(".main-left-p").text(homeImgObg?.para);
            cut2Left
              .children(".more")
              .children(".more-arrow")
              .attr("href", homeImgObg?.more);
            $(".swiper-slide-active .href-link").attr("href", homeImgObg?.more);
            let cut2TlS = gsap.timeline();
            cut2TlS
              .to(".cut-2-main-left-small-title", {
                opacity: 1,
                x: 0,
                duration: 0.4,
              })
              .to(
                ".main-left-p",
                {
                  opacity: 1,
                  x: 0,
                  duration: 0.4,
                },
                "<+0.1"
              )
              .to(
                ".cut-2-main-left-button",
                {
                  opacity: 1,
                  x: 0,
                  duration: 0.4,
                },

                "<+0.1"
              )
              .to(
                ".more",
                {
                  opacity: 1,
                  x: 0,
                  duration: 0.4,
                  onComplete: () => {
                    $(".swiper-button").removeClass("swiper-button-disabled");
                    cut2TlS.kill();
                  },
                },
                "<+0.1"
              );
          }
        }

        //第2cut的PC版
        let cut2Text = gsap.timeline({
          scrollTrigger: {
            trigger: ".second-cut",
            toggleActions: "play none none none",
            start: "50% bottom",
            once: true,
          },
        });

        let cut2Split = new SplitText(".cut-2-main-left-h1", { type: "chars" });
        cut2Text.from(cut2Split.chars, {
          opacity: 0,
          stagger: 0.15,
          y: 50,
          duration: 1.5,
        });

        if (window.innerWidth > 500) {
          cut2Text.add(
            gsap.from(".cut-2-main-right,.cut-2-main-left", {
              opacity: 0,
              y: 75,
              duration: 1.5,
            }),
            "<+0.75"
          );
        }

        let cut2start = "25% bottom";
        if (window.innerWidth <= 500) cut2start = "10% bottom";
        let titleTl = gsap.timeline({
          scrollTrigger: {
            trigger: ".second-cut",
            toggleActions: "play none none none",
            start: cut2start,
            once: true,
          },
        });
        titleTl
          .from(".cut-2-base", {
            ease: "linear",
            filter: "blur(10px)",
            opacity: "1",
            duration: "1.75",
          })
          .from(
            ".cut-2-title-content>h3",
            {
              ease: "linear",
              opacity: 0,
              y: "40%",
              duration: "1.25",
            },
            "<+1.25"
          )
          .from(
            ".cut-2-title-content>h4",
            {
              ease: "linear",
              opacity: 0,
              y: "40%",
              duration: "1.25",
            },
            "<+0.5"
          );

        //手機版
        if (window.innerWidth <= 500) {
          let cut1Splitext = new SplitText(".cut-2-phone-h1", {
            type: "chars",
          });
          titleTl.add(
            gsap.from(cut1Splitext.chars, {
              opacity: 0,
              filter: "blur(10px)",
              y: "-40",
              stagger: 0.15,
              duration: 0.8,
            }),
            "<-0.1"
          );

          //第一個
          gsap.from("#phone-item-1 .phone-item-img-big", {
            scrollTrigger: {
              trigger: "#phone-item-1",
              toggleActions: "restart pause resume pause",
              start: "top bottom",
              end: "40% center",
              scrub: 3,
            },
            scale: 1.3,
          });

          gsap.from(
            "#phone-item-1 .cut-2-main-left-small-title,#phone-item-1 .main-left-p,#phone-item-1 .cut-2-main-left-button,#phone-item-1 .more",
            {
              scrollTrigger: {
                trigger: "#phone-item-1",
                toggleActions: "play none none none",
                start: "40% center",
                once: true,
              },
              opacity: 0,
              stagger: 0.1,
              duration: 2,
            }
          );

          //第二個
          gsap.from("#phone-item-2 .phone-item-img-big", {
            scrollTrigger: {
              trigger: "#phone-item-2",
              toggleActions: "restart pause resume pause",
              start: "top bottom",
              end: "40% center",
              scrub: 3,
            },
            scale: 1.3,
          });
          gsap.from(
            "#phone-item-2 .cut-2-main-left-small-title,#phone-item-2 .main-left-p,#phone-item-2 .cut-2-main-left-button,#phone-item-2 .more",
            {
              scrollTrigger: {
                trigger: "#phone-item-2",
                toggleActions: "play none none none",
                start: "40% center",
                once: true,
              },
              opacity: 0,
              stagger: 0.1,
              duration: 2,
            }
          );
          //第三個
          gsap.from("#phone-item-3 .phone-item-img-big", {
            scrollTrigger: {
              trigger: "#phone-item-3",
              toggleActions: "restart pause resume pause",
              start: "top bottom",
              end: "40% center",
              scrub: 3,
            },
            scale: 1.3,
          });
          gsap.from(
            "#phone-item-3 .cut-2-main-left-small-title,#phone-item-3 .main-left-p,#phone-item-3 .cut-2-main-left-button,#phone-item-3 .more",
            {
              scrollTrigger: {
                trigger: "#phone-item-3",
                toggleActions: "play none none none",
                start: "40% center",
                once: true,
              },
              opacity: 0,
              stagger: 0.1,
              duration: 2,
            }
          );
        }
      });
    </script>
  </body>
</html>
