<!DOCTYPE html>
<html lang="zh-tw">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/index.css" />
    <title>樺輝建設</title>
  </head>
  <body>
    <nav id="nav">
      <div class="nav-icon">
        <img src="./img/home/樺輝icon.png" alt="樺輝icon" />
      </div>
      <div class="nav-list">
        <ul class="nav-list-ul">
          <li>關於品牌</li>
          <li>熱銷建案</li>
          <li>經典作品</li>
          <li>最新消息</li>
          <li>聯絡我們</li>
        </ul>
      </div>
    </nav>
    <main id="home-main">
      <section class="home-cut-1">
        <div class="home-cut-1-video">
          <video
            autoplay
            loop
            muted
            playsinline
            src="./img/home/LOGO動態-1.mp4"
          ></video>
        </div>
        <div class="home-cut-1-para">
          <h1>HOME FROME HEART</h1>
          <h2>繁樺座標•榮耀輝映</h2>
          <p>最好的建築 ，是近觀微米之間的工藝 。</p>
          <p class="home-cut-1-para-line"><span></span>追求極致 給你最好</p>
        </div>
      </section>
      <section class="home-cut-2">
        <div class="home-cut-2-para">
          <div class="home-cut-2-para-img">
            <img src="./img/home/首頁-純icon.svg" alt="純icon" />
          </div>
          <h1>CRAFTING EXCELLENCE</h1>
          <h1>LIVING IN TASTE.</h1>
          <h3>面對事件的態度，活出品味心高度。</h3>
          <p>在這追求速度換取利潤的時代，</p>
          <p>
            <span>樺輝建設秉持「數年磨一劍」的信念，</span
            ><span>注重每個細節的要求及優質的選材，</span>
          </p>
          <p>
            <span>以細膩的精工和堅定的決心，</span
            ><span>不斷提升品質，絕不妥協。</span>
          </p>
        </div>
        <div class="home-cut-2-fixed-container">
          <div class="home-cut-2-fixed-first">
            <!--  <div class="home-cut-2-fixed-first-image">
              <img src="./img/home/旋轉背景圖.jpg" alt="" /> 
            </div>-->

            <div class="home-cut-2-fixed-first-squre">
              <div class="yo">
                <canvas id="canvas"></canvas>
                <!-- <img class="yo-test" src="./img/home/旋轉背景圖.jpg" alt="" /> -->
                <!-- <div class="yo-test"></div> -->
              </div>
              <div class="home-cut-2-fixed-first-squre-wrapper">
                <div class="home-cut-2-fixed-first-squre-1">
                  <div class="home-cut-2-fixed-first-squre-text n-1">
                    <p>HUI CONSTRUCTION CO.,LTD HUA HUI</p>
                  </div>
                  <div class="home-cut-2-fixed-first-squre-text n-2">
                    <p>HUI CONSTRUCTION CO.,LTD HUA HUI</p>
                  </div>
                </div>
              </div>
              <div class="home-cut-2-fixed-first-squre-wrapper">
                <div class="home-cut-2-fixed-first-squre-2">
                  <div class="home-cut-2-fixed-first-squre-text n-3">
                    <p>HUI CONSTRUCTION CO.,LTD HUA HUI</p>
                  </div>
                  <div class="home-cut-2-fixed-first-squre-text n-4">
                    <p>HUI CONSTRUCTION CO.,LTD HUA HUI</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <footer id="footer">
      <span>Copyright © 2023樺輝建設股份有限公司版權所有　</span>
      <span>地址：台北市內湖區民權東路六段123巷28號10樓　</span>
      <span>TEL： 02-27928078</span>
    </footer>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="./js/gsap/gsap.min.js"></script>
    <script src="./js/gsap/ScrollTrigger.min.js"></script>
    <script src="./js/bootstrap.bundle.min.js"></script>
    <script>
      window.onload = () => {
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        const yo = document.querySelector(".yo");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        $(window).on("resize", function () {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        });
        const rectX = (canvas.width - 300) / 2;
        const rectY = (canvas.height - 300) / 2;
        const backImage = new Image();
        backImage.src = "./img/home/旋轉背景圖.jpg";
        backImage.onload = () => {
          // ctx.fillStyle = "black"; // 遮罩顏色
          // ctx.fillRect(rectX, rectY, 400, 400);
          // ctx.save(); // 保存當前狀態
          // ctx.beginPath();
          // ctx.rect(rectX, rectY, 400, 400); // 正方形路徑
          // ctx.clip(); // 裁剪路徑
          ctx.drawImage(backImage, 0, 0, canvas.width, canvas.height); // 繪製圖片
          // ctx.restore();
          // ctx.drawImage(backImage, 0, 0, canvas.width, canvas.height);
          // // 使用 destination-in 合成模式
          // ctx.globalCompositeOperation = "destination-in";
          // // 繪製遮罩矩形
          // ctx.fillRect(rectX, rectY, 400, 400);
          // // 恢復為預設的合成模式
          // // ctx.globalCompositeOperation = "source-over";
        };
        function drawMask(angle, num) {
          ctx.clearRect(0, 0, canvas.width, canvas.height); // 清除 canvas
          ctx.save(); // 保存當前狀態
          ctx.drawImage(backImage, 0, 0, canvas.width, canvas.height);
          ctx.globalCompositeOperation = "destination-in";
          ctx.translate(canvas.width / 2, canvas.height / 2); // 設置旋轉中心點
          ctx.rotate((angle * Math.PI) / 180); // 旋轉
          ctx.fillStyle = "black"; // 遮罩顏色
          ctx.fillRect(
            -150 * 10 * num,
            -150 * 10 * num,
            300 * num * 10,
            300 * num * 10
          ); // 繪製遮罩
          ctx.restore(); // 恢復原始狀態
        }

        gsap.registerPlugin(ScrollTrigger);
        gsap.to(".home-cut-2-fixed-first-squre-wrapper", {
          scrollTrigger: {
            trigger: ".home-cut-2-fixed-container ",
            toggleActions: "restart pause resume pause",
            start: "top top",
            end: "bottom bottom",
            pin: true,
            scrub: 0.2,
          },
          // scale: "5",
          // rotation: 180,
        });
        gsap.to(".yo", {
          scrollTrigger: {
            trigger: ".home-cut-2-fixed-container ",
            toggleActions: "restart pause resume pause",
            start: "top top",
            scrub: 0.2,
          },
          // clipPath: "100% 100vh",
          // rotation: 30,
        });

        gsap.to(".yo", {
          scrollTrigger: {
            trigger: ".home-cut-2-fixed-container ",
            toggleActions: "restart pause resume pause",
            start: "-10% top",
            end: "bottom bottom",
            onUpdate: (self) => {
              console.log(self);
              const progress = self.progress; // 取得滾動進度 (0 到 1 之間的值)
              const angle = 100 * progress; // 計算遮罩旋轉的角度 (0 到 360 度)
              drawMask(angle, progress); // 更新遮罩
            },
            scrub: 0.2,
          },
        });
      };
    </script>
  </body>
</html>
